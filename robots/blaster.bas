1 REM pick a spot, run to it, shoot while moving, lead shots
2 LET DX = 0
3 LET DY = 0
4 LET DMG = 0
5 LET ODMG = 0
6 LET LX = 0
7 LET LY = 0
8 LET DTT = 0
9 LET ATT = 0
10 LET RSA = 0
11 let RSW = 5


100 REM main loop
110 DMG = DAMAGE
120 GOSUB 2000 : REM pick spot 
130 GOSUB 2600 : REM get angle
140 DRIVE ATT, 100
150 GOSUB 2500 : REM get distance
160 IF DTT < 50 THEN GOTO 200
160 IF DMG <> ODMG THEN GOTO 250
170 GOSUB 2700
180 GOTO 150

200 DRIVE ATT,0
210 GOTO 120

249 REM damage!
250 LET ODMG = DMG
260 GOSUB 2000 : REM pick spot
270 GOSUB 2600 : REM get angle
275 DRIVE ATT, 100
280 GOSUB 2500 : REM get distance
290 IF DTT < 100 THEN G0T0 350
300 GOSUB 2700
310 RETURN
350 DRIVE ATT,0
360 RETURN

2000 REM pick random DX,DY
2010 LET DX = (RND 700) + 100
2020 LET DY = (RND 700) + 100
2030 RETURN

2500 REM get distance to target
2510 LET LX = LOCX
2515 LET LY = LOCY
2520 LET TX = DX - LOCX
2521 LET TY = DY - LY
2530 LET DTT = SQR (TX*TX) + (TY*TY)
2540 RETURN

2600 REM angle to target
2610 LET LX = LOCX
2620 LET LY = LOCY
2630 LET ATT = ATN2 DY-LY, DX - LX 
2640 RETURN

2700 REM scan and shoot
2710 LET SDTT = SCAN RSA,RSW
2720 IF SDTT > 0 AND SDTT < 700 THEN GOTO 2800
2730 LET RSA = RSA + RSW
2740 RETURN

2800 LET DTTN = SCAN RSA,RSW
2810 LET DIF = DTTN + (DTTN - SDTT)
2820 CANNON RSA, DIF
2830 RETURN