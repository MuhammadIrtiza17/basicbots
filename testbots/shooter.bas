1 REM pick a spot, run to it, shoot while moving, lead shots
2 LET DX = 0
3 LET DY = 0
4 LET DMG = 0
5 LET ODMG = 0
6 LET LX = 0
7 LET LY = 0
8 LET DTT = 0
9 LET ATT = 0
10 LET RSA = 0
11 let RSW = 5

20 LET TTEAM = TEAM
21 PRINT "TEAM",TTEAM,"\n"

100 REM main loop
110 DMG = DAMAGE
120 GOSUB 2000 : REM pick spot 
130 GOSUB 2600 : REM get angle
140 DRIVE ATT, 100
150 GOSUB 2500 : REM get distance
160 IF DTT < 50 THEN GOTO 200
160 IF DMG <> ODMG THEN GOTO 250
170 GOSUB 2700
180 GOTO 150

200 DRIVE ATT,0
210 GOTO 120

249 REM damage!
250 LET ODMG = DMG
260 GOSUB 2000 : REM pick spot
270 GOSUB 2600 : REM get angle
275 DRIVE ATT, 100
280 GOSUB 2500 : REM get distance
290 IF DTT < 100 THEN G0T0 350
300 GOSUB 2700
310 RETURN
350 DRIVE ATT,0
360 RETURN

2000 REM pick random DX,DY
2010 LET DX = (RND 700) + 100
2020 LET DY = (RND 700) + 100
2030 RETURN

2500 REM get distance to target
2510 LET LX = LOCX
2515 LET LY = LOCY
2520 LET TX = DX - LOCX
2521 LET TY = DY - LY
2530 LET DTT = SQR (TX*TX) + (TY*TY)
2540 RETURN

2600 REM angle to target
2610 LET LX = LOCX
2620 LET LY = LOCY
2630 LET ATT = ATN2 DY-LY, DX - LX 
2640 RETURN

2700 REM scan and shoot
2710 LET SDTT = SCAN RSA,RSW
2720 IF SDTT > 0 AND SDTT < 700 THEN GOTO 2800
2730 LET RSA = RSA + RSW
2731 IF RSA > 360 THEN LET RSA = RSA - 360
2732 IF RSA < 0 THEN LET RSA = RSA + 360
2740 GOSUB 6000
2750 RETURN

2800 LET DTTN = SCAN RSA,RSW
2810 LET DIF = DTTN + (DTTN - SDTT)
2820 CANNON RSA, DIF
2822 GOSUB 7000
2830 RETURN

6000 LET MSG = IN
6001 IF LEN MSG = 0 THEN RETURN
6010 LET MSGX = LEFT$ MSG, 3
6020 LET MSGY = RIGHT$ MSG,3
6030 LET MX = LOCX
6040 LET MY = LOCY
6060 LET MA = ATN2 MSGY-MY,MSGY-MX
6070 LET MD1 = MSGX-MX
6080 LET MD2 = MSGY-MY
6090 LET MD = SQR MD1*MD1+MD2*MD2
6100 CANNON MA,MD
6110 RETURN


7000 LET IX = ((COS RSA) * DTTN) + LX
7012 LET IY = ((SIN RSA) * DTTN) + LY
7020 LET S1 = STRC$ IX,3
7030 LET S2 = STRC$ IY,3
7040 LET S3 = S1 + S2
7050 OUT S3
7060 RETURN